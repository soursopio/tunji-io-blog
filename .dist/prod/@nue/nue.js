function u(Y){const{root:Q,fn:L,fns:P,deps:g,ctx:N}=Y;var F,K,X,W,V,_,Z=[];function R(H){return new Proxy({},{get(E,S){if(_){const U=W.indexOf(S);if(U>=0)return H[U]}return S===W?H:W.includes(S)?H[S]:S==V?X.indexOf(H):N[S]}})}function I(H,E,S,U){const J=O({fns:P,dom:Q.cloneNode(!0)},R(H),g,N);Z[U?"unshift":"push"](J),J.before(U||F),N.oninsert?.call(N,J.$el,H,{index:E,is_repaint:!!S,is_first:!E,is_last:E==X.length-1,items:X})}function j(){Z.forEach((H)=>H.unmount()),Z=[],X.forEach(I)}function w(H){const{unshift:E,splice:S,push:U,sort:J,reverse:q}=H;return Object.assign(H,{push(z){U.call(X,z),I(z,X.length-1)},unshift(z){E.call(X,z),I(z,0,null,Z[0].$el)},sort(z){J.call(X,z),j()},reverse(){q.call(X),j()},splice(z,D){Z.slice(z,z+D).forEach((G)=>G.unmount()),Z.splice(z,D),S.call(X,z,D)},shift(){H.splice(0,1)},pop(){H.splice(H.length-1,1)},remove(z){const D=X.indexOf(z);if(D>=0)H.splice(D,1)}})}function $(){var H;if([W,H=[],V,_]=L(N),X){if(H!==K)X=w(H),j(),K=H;return Z.forEach((E)=>E.update())}if(H){const E=Q.parentElement;F=new Text(""),E.insertBefore(F,Q),E.removeChild(Q),X=w(H),H.forEach(I),K=H}}return{update:$}}function h(Y){const{root:Q,fn:L,fns:P,deps:g,ctx:N}=Y,F=[];var K=Q,X,W;function V(Z,R){Y.processAttrs(Z);const I=O({fns:P,dom:Z},N,g,N);F.push(I),I.fn=R}V(Q,L);while(K=K.nextElementSibling){const Z=K.getAttribute(":else-if");if(Z)V(K,P[Z]),K.removeAttribute(":else-if");else if(K.hasAttribute(":else"))V(K,()=>!0),K.removeAttribute(":else");else{W=K;break}}function _(){if(!X){const R=Q.parentElement;X=new Text(""),R.insertBefore(X,Q)}const Z=F.find((R)=>R.fn(N));F.forEach((R)=>R==Z?R.before(X):R.unmount())}return{update:_,next:W}}function y(Y){const Q=document.createElement("_");return Q.innerHTML=Y.trim(),Q.firstChild}function A(Y,Q=""){return Y?.join?Y.filter((L)=>L||L===0).join(Q).trim().replace(/\s+/g," "):Y||""}function f(Y,Q){if(Y==Q)return[Y];if(!Y.join)Y=[Y];if(Q&&!Q.join)Q=[Q];return Y.concat(Q)}var b={":if":h,":for":u},x=["class","style","id"];function O(Y,Q={},L=[],P={}){const{Impl:g,tmpl:N,fns:F=[],dom:K,inner:X}=Y,W=[];function V(q){const z=q.nodeType;if(z==3){const[D,G]=/:(\d+):/.exec(q.textContent.trim())||[],M=F[G];if(M)W.push((B)=>q.textContent=A(M(J)))}if(z==1){for(let B in b){const C=F[q.getAttribute(B)];if(B==":if"&&C&&q.getAttribute(":for"))if(C(J))continue;else q.removeAttribute(":for");if(C){q.removeAttribute(B);const T=b[B]({root:q,fn:C,fns:F,deps:L,ctx:J,processAttrs:_});return W.push(T.update),T}}const D=q.tagName.toLowerCase(),G=q.nextSibling;if(X&&D=="slot")return X.replace(q),{next:G};const M=L.find((B)=>B.name==D);if(M){if(q.firstChild){const T=document.createElement("_");T.append(...q.childNodes),M.inner=O({fns:F,dom:T},J,L)}const B=$(q),C=O(M,J,L,B).mount(q);if(K?.tagName.toLowerCase()==M.name)U.$el=C.$el;return W.push((T)=>H(C.$el,B)),U.$refs[q.getAttribute("ref")||D]=C.impl,{next:G}}else _(q),I(q,V)}}function _(q){for(let z of[...q.attributes])R(q,z.name,z.value)}function Z(q,z,D){if(q.getAttribute(z)!==D)q.setAttribute(z,D)}function R(q,z,D){if(z=="ref"||z=="name")U.$refs[D]=q;const G=F[D];if(!G)return;const M=z.slice(1),B=z[0];if(":@$".includes(B))q.removeAttribute(z);if(M=="attr")return W.push((C)=>{for(let[T,v]of Object.entries(G(J)))Z(q,T,v===!0?"":v)});if(B==":"){if(M!="bind")W.push((C)=>{let T=G(J);Z(q,M,A(T))})}else if(B=="@")q[`on${M}`]=(C)=>{G.call(J,J,C),(P?.update||E)()};else if(B=="$")W.push((C)=>{if(!(q[M]=!!G(J)))q.removeAttribute(M)});if(M=="html")W.push((C)=>q.innerHTML=G(J))}function I(q,z){let D=q.firstChild;while(D)D=z(D)?.next||D.nextSibling}function j(q,z){const D=q.getAttribute(":"+z),G=F[D];return G?G(J):J[D]||q.getAttribute(z)||q[z]||void 0}function w(q){const z={};for(let D of[...q.attributes]){const G=D.name.replace(":",""),M=j(q,G);if(!x.includes(G)&&typeof M!="object")z[G]=M==null?!0:M}return z}function $(q){return q.$attrs=w(q),new Proxy(q,{get(z,D){return j(q,D)}})}function H(q,z){const D=f(j(q,"class")||[],z.class);if(D[0])q.className=A(D," ");const{id:G,style:M}=z;if(M&&M.x!="")q.style=A(M);if(G)q.id=A(G)}function E(q){if(q)Object.assign(S,q);return W.map((z)=>z()),S.updated?.call(J,J),U}let S={};const U={update:E,$el:K,get root(){return U.$el},$refs:{},$parent:P,impl:S,mountChild(q,z,D){const G=L.find((M)=>M.name==q);if(G)O(G,D,L,J).mount(z)},mount(q){const z=K||(U.$el=y(N));let D=q.querySelector("script");if(D)Object.assign(Q,JSON.parse(D.textContent)),q.insertAdjacentElement("afterend",D);if(g)S=U.impl=new g(J);S.mountChild=U.mountChild,S.$refs=U.$refs,S.update=E,V(z),q.replaceWith(z);for(let G of[...q.attributes])Z(z,G.name,G.value);return S.mounted?.call(J,J),E()},append(q){const z=document.createElement("_");return q.append(z),U.mount(z)},replace(q){V(K),q.replaceWith(...K.children),E()},before(q){if(K){if(U.$el=K,!document.body.contains(K))q.before(K);if(!K.walked)V(K),K.walked=1;return E()}},unmount(){try{U.root.remove()}catch(q){}S.unmounted?.call(J,J),E()}},J=new Proxy({},{get(q,z){for(let D of[U,S,Q,P,P.bind]){const G=D&&D[z];if(G!=null)return G}},set(q,z,D){if(P&&P[z]!==void 0)P[z]=D,P.update();else if(Object.prototype.hasOwnProperty.call(S,z))S[z]=D;else U[z]=D;return!0}});return U}export{O as default,O as createApp};
