function D(z,j=document){return j.querySelector(z)}function I(z,j=document){return[...j.querySelectorAll(z)]}async function Q(z,j){if(dispatchEvent(new Event("before:route")),!j)history.pushState({path:z},0,z);const x=v(await T(z));document.title=D("title",x)?.textContent;const E='[name="nue:components"]';D(E).content=D(E,x).content;for(let J of I("script[src]",x))await import(J.getAttribute("src"));V(I("style"),I("style",x)).forEach((J)=>D("head").appendChild(J));const G=V(I("link"),I("link",x)),O=R(),K=R(x);if(O)O.replaceWith(K);else if(K)D("head").appendChild(K);D("body").classList.value=D("body2",x).classList.value||"",A(G,()=>{Z(x),Y(z);const{hash:J}=location,N=J&&D(J);scrollTo(0,N?N.offsetTop-parseInt(getComputedStyle(N).scrollMarginTop)||0:0),dispatchEvent(new Event("route"))})}function R(z){return I("style",z).find((j)=>!j.attributes.length)}function Z(z){["header","main","footer","nav"].forEach(function(j){const x=D("body >"+j),E=D("body2 >"+j,z),F=E&&E.cloneNode(!0);if(x&&E)if(j=="main")C(z);else X(x,F);else if(x)x.remove();else if(E){if(j=="header")D("body").prepend(F);if(j=="footer")D("body").append(F);if(j=="nav")D("body > header").after(F)}})}function X(z,j){if(z.outerHTML.replace(' aria-selected=""',"")!=j.outerHTML)z.replaceWith(j)}function C(z){["article","aside:first-child","article + aside"].forEach(function(j,x){const E=D("main >"+j),F=D("main >"+j,z),G=F&&F.cloneNode(!0);if(E&&F)X(E,G);else if(E)E.remove();else if(F){if(!x)D("main").append(G);if(x==1)D("main").prepend(G);if(x==2)D("article").after(G)}})}function H(z,j){z.addEventListener("click",(x)=>{const E=x.target.closest("[href]"),F=E?.getAttribute("href"),G=E?.getAttribute("target");if(x.defaultPrevented||x.metaKey||x.ctrlKey||x.shiftKey||x.altKey||!F||F[0]=="#"||F.includes("//")||F.startsWith("mailto:")||G=="_blank")return;if(F!=location.pathname)j(F);x.preventDefault()})}function Y(z,j="aria-selected"){I(`[${j}]`).forEach((x)=>x.removeAttribute(j)),I("a").forEach((x)=>{if(x.getAttribute("href")==z)x.setAttribute(j,"")})}function U(z,j){return j.find((x)=>x.getAttribute("href")==z.getAttribute("href"))}function V(z,j){return z.forEach((x,E)=>{x.disabled=!U(x,j)}),j.filter((x)=>!U(x,z))}async function T(z){let j=W[z];if(j)return j;const x=await fetch(z);if(j=await x.text(),x.status==404&&j?.trim()[0]!="<")D("article").innerHTML="<h1>Page not found</h1>";else W[z]=j;return j}function v(z){z=z.replace(/<(\/?)body/g,"<$1body2");const j=document.createElement("template");return j.innerHTML=z.trim(),j.content}function A(z,j){let x=0;!z[0]?j():z.forEach((E,F)=>{M(E.href,()=>{if(++x==z.length)j()})})}function M(z,j){const x=document.createElement("link");x.rel="stylesheet",x.href=z,D("head").appendChild(x),x.onload=j}var L=typeof window=="object";if(L){if(!document.startViewTransition)document.startViewTransition=(z)=>z();history.pushState({path:location.pathname},0),H(document,async(z)=>{document.startViewTransition(async function(){await Q(z)})}),Y(location.pathname),addEventListener("popstate",(z)=>{const{path:j}=z.state||{};if(j)Q(j,!0)})}var W={};export{Y as setActive,H as onclick,Q as loadPage,I as $$,D as $};
